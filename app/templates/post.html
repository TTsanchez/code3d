<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/post_style.css') }}">
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º —Å—Ç–∏–ª–∏ CodeMirror -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/dracula.min.css">

    <title>–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ5</title>

</head>
<body>
    <center>
<!--        <h1>{{post.type_of_work}}</h1>-->
<!--        <h2>{{post.title}}</h2>-->
<!--        <h3>–°—Ç—É–¥–µ–Ω—Ç –≥—Ä. {{user.group or 'N/A'}} - {{user.last_name}} {{user.first_name[0]}}.{{user.father_name[0]}}.</h3>-->
        {% if post.technology3d == 'x3dom' %}
        <x3d width="80%" height="70vh">
            {{post.code3d|safe}}
        </x3d>
        {% elif post.technology3d == 'verge3d' %}
            <iframe id="Okno" allowfullscreen src="{{post.code3d|safe}}"></iframe>
        {% elif post.technology3d == 'three.js' %}
            <div class="threejs-header">
                <h1>{{post.title}}</h1>
                <h2>{{user.username}}</h2>
            </div>

            <div class="threejs-container">
                <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ -->
                <div class="preview-section">
                    <div id="canvas-container"></div>

                    <div class="post-actions">
                        <button class="like-btn">‚ù§Ô∏è {{post.likes_count}}</button>
                        <button class="share-btn">üîó –ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
                        <button class="comments-btn" onclick="toggleComments()">üí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</button>
                    </div>

                    <div class="comments-section" id="comments-section">
                        <p>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –ø–æ–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç</p>
                    </div>
                </div>

                <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ -->
                <div class="code-section">
                    <textarea id="editor">{{post.code3d}}</textarea>

                    <div id="controls">
                        <button onclick="runCode()">–ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–¥</button>
                        <div id="output"></div>
                    </div>
                </div>
            </div>

            <div class="post-description">
                <h3>–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞</h3>
                <p>{{post.description}}</p>
            </div>
        {% endif %}

    </center>
	<pre class="3dcode">{{post.content|safe }}</pre>

{% if post.technology3d == 'x3dom' %}
    <script src="https://www.x3dom.org/download/dev/x3dom-full.js"></script>
{% elif post.technology3d == 'three.js' %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/edit/matchbrackets.min.js"></script>
    <script src="../static/js/run_code_3js.js"></script>
    <script src="../static/js/EditorSyntaxHighlighting.js"></script>
{% endif %}
</body>
</html>